{"@timestamp":"2024-08-20T16:07:02.7478786+02:00","log.level":"Error","message":"HTTP \"POST\" \"/haalcentraal/api/brp/personen\" responded 500 in 469.2894 ms","ecs.version":"8.11.0","log":{"logger":"Serilog.AspNetCore.RequestLoggingMiddleware"},"span.id":"c6652e17cf2855f2","trace.id":"eeb086ab49e77979ce7f5308e0e41124","labels":{"MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","ConnectionId":"0HN6145D0TU7N"},"agent":{"type":"Elastic.CommonSchema.Serilog","version":"8.11.1+69a082298d546f804e5610128818fbf9154b9958"},"event":{"created":"2024-08-20T16:07:02.7478786+02:00","duration":469289400,"severity":4,"timezone":"W. Europe Standard Time"},"host":{"os":{"full":"Microsoft Windows 10.0.19045","platform":"Win32NT","version":"10.0.19045.0"},"architecture":"X64","hostname":"DESKTOP-0UKFABH"},"http":{"request.id":"0HN6145D0TU7N:00000002","request.method":"POST","response.mime_type":"application/problem+json; charset=utf-8","response.status_code":500},"process":{"name":"Rvig.Personen.App","pid":11100,"thread.id":6,"thread.name":".NET ThreadPool Worker","title":""},"service":{"name":"Rvig.Personen.App","type":"dotnet","version":"2.2.1+a5a4336ee7731e95c82f27cc6c7435b0839f0698"},"url":{"path":"/haalcentraal/api/brp/personen"},"user":{"domain":"DESKTOP-0UKFABH","name":"Patrick"},"brp":{"request.headers":{"Accept":["*/*"],"Connection":["close"],"Host":["localhost:44331"],"User-Agent":["Thunder Client (https://www.thunderclient.com)"],"Accept-Encoding":["gzip, deflate, br"],"Content-Type":["application/json"],"Content-Length":["264"],"X-API-KEY":["TeOKfUcF2AMdRQcCIjsFp2Sx23rYsXuK"]},"request.body":{"type":"RaadpleegMetBurgerservicenummer","fields":["kinderen.burgerservicenummer","kinderen.geboorte.datum","kinderen.naam.geslachtsnaam","kinderen.naam.voorvoegsel","kinderen.naam.voornamen","gezag"],"burgerservicenummer":["999997440"]},"response.headers":{"Content-Type":["application/json; charset=utf-8"],"Content-Length":["5503"]},"response.body":{"type":"https://datatracker.ietf.org/doc/html/rfc7231#section-6.6.1","title":"Host can't be null","status":500,"detail":"   at Npgsql.NpgsqlConnectionStringBuilder.PostProcessAndValidate()\r\n   at Npgsql.NpgsqlConnection.SetupDataSource()\r\n   at Rvig.Data.Base.Postgres.Repositories.PostgresRepoBase.GetConnection() in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.Data.Base.Postgres\\Repositories\\PostgresRepoBase.cs:line 24\r\n   at Rvig.Data.Base.Postgres.Repositories.PostgresSqlQueryRepoBase`1.GetFilterResultAsync(NpgsqlCommand command, IDictionary`2 additionalMappings) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.Data.Base.Postgres\\Repositories\\PostgresSqlQueryRepoBase.cs:line 61\r\n   at Rvig.Data.Personen.Repositories.RvigPersoonRepo.GetPersoonByBsns(IEnumerable`1 bsns, String gemeenteVanInschrijving, List`1 fields) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.Data.Personen\\Repositories\\RvigPersoonRepo.cs:line 37\r\n   at Rvig.Data.Personen.Services.GetAndMapGbaPersonenService.GetPersonenMapByBsns(IEnumerable`1 burgerservicenummers, String gemeenteVanInschrijving, List`1 fields, Boolean checkAuthorization) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.Data.Personen\\Services\\GetAndMapGbaPersonenService.cs:line 77\r\n   at Rvig.HaalCentraalApi.Personen.Services.GbaPersonenApiService.GetPersonen(RaadpleegMetBurgerservicenummer model) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.HaalCentraalApi.Personen\\Services\\GbaPersonenApiService.cs:line 94\r\n   at Rvig.HaalCentraalApi.Personen.Services.GbaPersonenApiService.GetPersonen(PersonenQuery model) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.HaalCentraalApi.Personen\\Services\\GbaPersonenApiService.cs:line 62\r\n   at Rvig.HaalCentraalApi.Personen.Controllers.GbaApiPersonenController.GetPersonen(PersonenQuery model) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.HaalCentraalApi.Personen\\Controllers\\GbaApiPersonenController.cs:line 25\r\n   at lambda_method4(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Rvig.Base.App.Middleware.ForceAcceptAndContentTypeHeadersWithValueMiddleware.InvokeAsync(HttpContext context) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.Base.App\\Middleware\\ForceContentTypeWithValueMiddleware.cs:line 27\r\n   at Rvig.Base.App.Middleware.EnableRequestBodyBufferingMiddleware.InvokeAsync(HttpContext context) in C:\\Users\\Patrick\\Desktop\\werk_en_hobby\\projects\\brp-api\\personen-data-service\\src\\Personen.Data.Service\\Rvig.Base.App\\Middleware\\EnableRequestBodyBufferingMiddleware.cs:line 31\r\n   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","instance":"/haalcentraal/api/brp/personen","code":"serverError"}}}
